# Ambient AI VCP - Environment Configuration
# Copy this file to .env and customize for your deployment

# =============================================================================
# API Server Configuration
# =============================================================================

# Host to bind to (0.0.0.0 for public access, 127.0.0.1 for local only)
API_HOST=0.0.0.0

# Port to listen on
API_PORT=3000

# Log level (trace, debug, info, warn, error)
RUST_LOG=info

# CORS allowed origins (comma-separated list of explicit origins)
# Wildcards are not supported. Add every origin that your frontend is served from.
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# Maximum number of worker threads
MAX_WORKERS=4

# =============================================================================
# Mesh Coordinator Configuration
# =============================================================================

# Cluster identifier
CLUSTER_ID=global-cluster

# Task assignment strategy (weighted, round-robin, least-loaded, latency-aware)
STRATEGY=weighted

# Maximum nodes in cluster
MAX_NODES=10000

# =============================================================================
# Compute Node Configuration
# =============================================================================

# Unique node identifier (leave empty for auto-generation)
NODE_ID=

# Geographic region
REGION=us-west

# Node type (gateway, compute, storage)
NODE_TYPE=compute

# Coordinator URL
COORDINATOR_URL=http://localhost:8080

# =============================================================================
# WASM Engine Configuration
# =============================================================================

# Maximum memory per WASM instance (in MB)
WASM_MAX_MEMORY_MB=512

# WASM execution timeout (in seconds)
WASM_TIMEOUT_SECS=30

# Maximum instructions (gas limit)
WASM_MAX_INSTRUCTIONS=10000000000

# =============================================================================
# Security Configuration
# =============================================================================

# Environment mode (development, production)
ENVIRONMENT=development

# JWT secret for token generation (REQUIRED for production)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-jwt-secret-key-change-this-in-production

# JWT token expiration in hours
JWT_EXPIRATION_HOURS=24

# Optional shared pepper for refresh token/API key hashing.
# Set this (or REFRESH_TOKEN_PEPPER and API_KEY_PEPPER separately) to silence
# development fallback pepper warnings.
AUTH_HASH_PEPPER=dev-shared-auth-pepper-change-this-in-production

# Per-token-type pepper overrides (take precedence over AUTH_HASH_PEPPER).
# Generate with: openssl rand -base64 32
REFRESH_TOKEN_PEPPER=dev-refresh-token-pepper-change-in-production
API_KEY_PEPPER=dev-api-key-pepper-change-in-production
CONNECT_SESSION_TOKEN_PEPPER=dev-connect-session-pepper-change-in-production

# bcrypt cost factor for password hashing (4-31; default 12).
# Lower values are faster but less secure. 10 suits high-traffic interactive
# logins; 12 is a good balance for most deployments.
BCRYPT_COST=12

# API Key for alternative authentication (optional)
API_KEY=your-api-key-here

# Enable TLS (requires cert files)
# TLS_ENABLED=false
# TLS_CERT_PATH=/path/to/cert.pem
# TLS_KEY_PATH=/path/to/key.pem

# Rate limiting configuration
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# =============================================================================
# Monitoring & Metrics
# =============================================================================

# Enable Prometheus metrics endpoint
METRICS_ENABLED=true

# Metrics port (separate from API port)
METRICS_PORT=9090

# =============================================================================
# Database Configuration (for persistent state)
# =============================================================================

# PostgreSQL Database URL
# Format: postgres://username:password@host:port/database
DATABASE_URL=postgres://vcp_user:vcp_password@localhost:5432/ambient_vcp

# Database connection pool settings
DB_MAX_CONNECTIONS=10
DB_MIN_CONNECTIONS=2
DB_CONNECTION_TIMEOUT_SECS=30

# =============================================================================
# Cloud Provider Specific
# =============================================================================

# Render.com uses PORT environment variable
# PORT=10000

# AWS/GCP/Azure may require specific region configs
# AWS_REGION=us-west-2
# GCP_REGION=us-central1
# AZURE_REGION=eastus
